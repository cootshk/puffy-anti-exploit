package com.puffy.listeners

import com.puffy.metrics.PlayerMetricFactory
import net.fabricmc.fabric.api.event.lifecycle.v1.ServerTickEvents
import net.fabricmc.fabric.api.networking.v1.PlayerLookup
import net.minecraft.server.MinecraftServer

class UpdateMetricsEachTick : ServerTickEvents.EndTick {
    override fun onEndTick(server: MinecraftServer) {
        for (player in PlayerLookup.all(server)) {
            val metricFactory = player as PlayerMetricFactory
            metricFactory.updateAllMetrics(server)
        }
    }
}