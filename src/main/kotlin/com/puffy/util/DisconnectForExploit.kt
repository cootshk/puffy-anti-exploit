package com.puffy.util

import net.minecraft.server.network.ServerPlayerEntity
import net.minecraft.text.Text
import net.minecraft.util.Formatting

fun ServerPlayerEntity.disconnectForExploit(mitigationName: String) {
    val headerStart = Text.literal("PAE - ").formatted(Formatting.GOLD, Formatting.BOLD)
    val packetName = Text.literal(mitigationName).formatted(Formatting.DARK_PURPLE)
    val headerEnd = Text.literal("\n\n").formatted(Formatting.GOLD, Formatting.BOLD)
    val message =
        Text.literal(
            "Too much suspicious activity was generated from you.\nThis can be the result from using a hacked or 'utility' client.\nVerify your client's integrity and rejoin."
        )

    val disconnectText =
        Text.empty().append(headerStart).append(packetName).append(headerEnd).append(message)

    this.networkHandler.disconnect(disconnectText)
}
