package com.puffy

import com.puffy.listeners.SuspiciousPacketDetected
import com.puffy.listeners.UpdateMetricsEachTick
import net.fabricmc.api.ModInitializer
import net.fabricmc.fabric.api.event.lifecycle.v1.ServerTickEvents
import org.slf4j.LoggerFactory

object PuffyAntiExploit : ModInitializer {
    private val logger = LoggerFactory.getLogger("puffy-anti-exploit")

    override fun onInitialize() {
        ServerTickEvents.END_SERVER_TICK.register(UpdateMetricsEachTick())
        MetricPacketDetection.registerSuspiciousPacketListener(SuspiciousPacketDetected())

        logger.info("Puffy Anti Exploit initialized!")
    }
}